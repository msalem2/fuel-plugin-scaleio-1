# This tasks will be applied on controller nodes,
# here you can also specify several roles, for example
# ['cinder', 'compute'] will be applied only on
# cinder and compute nodes
- role: ['scaleio-gw']
  stage: post_deployment/2100
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/gateway.pp
    puppet_modules: puppet/modules
    timeout: 600

- role: ['scaleio-mdm']
  stage: post_deployment/2101
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/mdm.pp
    puppet_modules: puppet/modules
    timeout: 600

- role: ['scaleio-tb']
  stage: post_deployment/2102
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/tb.pp
    puppet_modules: puppet/modules
    timeout: 600

- role: ['cinder']
  stage: post_deployment/2200
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/cinder.pp
    puppet_modules: puppet/modules
    timeout: 600

# "reboot" task reboots the nodes and waits until they get back online
# - role: '*'
#   stage: pre_deployment
#   type: reboot
#   parameters:
#     timeout: 600
